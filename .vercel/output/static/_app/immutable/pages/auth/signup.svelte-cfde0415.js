import{S as le,i as ie,s as ne,w as re,a as D,l as f,r as L,x as oe,c as y,m as p,n as m,h as o,u as O,p as u,y as ue,b as W,Q as n,W as M,U as Q,V as de,f as ce,t as fe,B as pe,G as me,M as ee,v as z,O as he,E as _e}from"../../chunks/index-57f72b05.js";import{N as ve,c as ge,a as Ee}from"../../chunks/Notification-a800a359.js";import{b as be}from"../../chunks/auth-b6dd5606.js";import{V as we}from"../../chunks/db-3033293f.js";import"../../chunks/index-1c949c0b.js";import"../../chunks/internal-84789be8.js";import"../../chunks/preload-helper-4c397a37.js";function Ne(r){let e;return{c(){e=L(r[0])},l(t){e=O(t,r[0])},m(t,s){W(t,e,s)},p(t,s){s&1&&z(e,t[0])},d(t){t&&o(e)}}}function se(r){let e,t=r[3].fullName+"",s;return{c(){e=f("p"),s=L(t),this.h()},l(a){e=p(a,"P",{class:!0});var l=m(e);s=O(l,t),l.forEach(o),this.h()},h(){u(e,"class","help is-danger")},m(a,l){W(a,e,l),n(e,s)},p(a,l){l&8&&t!==(t=a[3].fullName+"")&&z(s,t)},d(a){a&&o(e)}}}function te(r){let e,t=r[3].email+"",s;return{c(){e=f("p"),s=L(t),this.h()},l(a){e=p(a,"P",{class:!0});var l=m(e);s=O(l,t),l.forEach(o),this.h()},h(){u(e,"class","help is-danger")},m(a,l){W(a,e,l),n(e,s)},p(a,l){l&8&&t!==(t=a[3].email+"")&&z(s,t)},d(a){a&&o(e)}}}function ae(r){let e,t=r[3].password+"",s;return{c(){e=f("p"),s=L(t),this.h()},l(a){e=p(a,"P",{class:!0});var l=m(e);s=O(l,t),l.forEach(o),this.h()},h(){u(e,"class","help is-danger")},m(a,l){W(a,e,l),n(e,s)},p(a,l){l&8&&t!==(t=a[3].password+"")&&z(s,t)},d(a){a&&o(e)}}}function $e(r){let e,t,s,a,l,g,U,w,h,k,_,I,C,E,V,b,c,F,T,P,S,j,H,q,B;e=new ve({props:{showNotification:r[0]!==null,status:r[1],$$slots:{default:[Ne]},$$scope:{ctx:r}}});let v=r[3].fullName&&se(r),N=r[3].email&&te(r),$=r[3].password&&ae(r);return{c(){re(e.$$.fragment),t=D(),s=f("form"),a=f("div"),l=f("p"),g=f("input"),U=D(),v&&v.c(),w=D(),h=f("div"),k=f("p"),_=f("input"),I=D(),N&&N.c(),C=D(),E=f("div"),V=f("p"),b=f("input"),c=D(),$&&$.c(),F=D(),T=f("div"),P=f("p"),S=f("button"),j=L("Sign up"),this.h()},l(i){oe(e.$$.fragment,i),t=y(i),s=p(i,"FORM",{});var d=m(s);a=p(d,"DIV",{class:!0});var A=m(a);l=p(A,"P",{class:!0});var J=m(l);g=p(J,"INPUT",{class:!0,type:!0,placeholder:!0}),J.forEach(o),U=y(A),v&&v.l(A),A.forEach(o),w=y(d),h=p(d,"DIV",{class:!0});var R=m(h);k=p(R,"P",{class:!0});var K=m(k);_=p(K,"INPUT",{class:!0,type:!0,placeholder:!0}),K.forEach(o),I=y(R),N&&N.l(R),R.forEach(o),C=y(d),E=p(d,"DIV",{class:!0});var G=m(E);V=p(G,"P",{class:!0});var X=m(V);b=p(X,"INPUT",{class:!0,type:!0,placeholder:!0}),X.forEach(o),c=y(G),$&&$.l(G),G.forEach(o),F=y(d),T=p(d,"DIV",{class:!0});var Y=m(T);P=p(Y,"P",{class:!0});var Z=m(P);S=p(Z,"BUTTON",{class:!0});var x=m(S);j=O(x,"Sign up"),x.forEach(o),Z.forEach(o),Y.forEach(o),d.forEach(o),this.h()},h(){u(g,"class","input"),u(g,"type","text"),u(g,"placeholder","Full Name"),u(l,"class","control"),u(a,"class","field"),u(_,"class","input"),u(_,"type","email"),u(_,"placeholder","Email"),u(k,"class","control"),u(h,"class","field"),u(b,"class","input"),u(b,"type","password"),u(b,"placeholder","Password"),u(V,"class","control"),u(E,"class","field"),u(S,"class","button is-fullwidth is-link"),u(P,"class","control"),u(T,"class","field")},m(i,d){ue(e,i,d),W(i,t,d),W(i,s,d),n(s,a),n(a,l),n(l,g),M(g,r[2].fullName),n(a,U),v&&v.m(a,null),n(s,w),n(s,h),n(h,k),n(k,_),M(_,r[2].email),n(h,I),N&&N.m(h,null),n(s,C),n(s,E),n(E,V),n(V,b),M(b,r[2].password),n(E,c),$&&$.m(E,null),n(s,F),n(s,T),n(T,P),n(P,S),n(S,j),H=!0,q||(B=[Q(g,"input",r[7]),Q(_,"input",r[8]),Q(b,"input",r[9]),Q(s,"submit",de(r[6]))],q=!0)},p(i,[d]){const A={};d&1&&(A.showNotification=i[0]!==null),d&2&&(A.status=i[1]),d&16385&&(A.$$scope={dirty:d,ctx:i}),e.$set(A),d&4&&g.value!==i[2].fullName&&M(g,i[2].fullName),i[3].fullName?v?v.p(i,d):(v=se(i),v.c(),v.m(a,null)):v&&(v.d(1),v=null),d&4&&_.value!==i[2].email&&M(_,i[2].email),i[3].email?N?N.p(i,d):(N=te(i),N.c(),N.m(h,null)):N&&(N.d(1),N=null),d&4&&b.value!==i[2].password&&M(b,i[2].password),i[3].password?$?$.p(i,d):($=ae(i),$.c(),$.m(E,null)):$&&($.d(1),$=null)},i(i){H||(ce(e.$$.fragment,i),H=!0)},o(i){fe(e.$$.fragment,i),H=!1},d(i){pe(e,i),i&&o(t),i&&o(s),v&&v.d(),N&&N.d(),$&&$.d(),q=!1,me(B)}}}function Se(r,e,t){let s,a;const l=`${we}logging-in`;let g=null,U="error";const{form:w,errors:h,handleChange:k,handleSubmit:_,isValid:I,isSubmitting:C}=ge({initialValues:{fullName:"",email:"",password:""},validate:c=>Ee(c),onSubmit:async({fullName:c,username:F,email:T,password:P})=>{t(0,g=null);const S=await be({full_name:c,email:T,password:P,redirectTo:l});t(0,g=S.message),S.statusCode===200&&t(1,U="success")}});ee(r,w,c=>t(2,s=c)),ee(r,h,c=>t(3,a=c));function E(){s.fullName=this.value,w.set(s)}function V(){s.email=this.value,w.set(s)}function b(){s.password=this.value,w.set(s)}return[g,U,s,a,w,h,_,E,V,b]}class Pe extends le{constructor(e){super(),ie(this,e,Se,$e,ne,{})}}function Ie(r){let e,t,s,a,l,g,U,w,h,k,_,I,C,E,V,b;return h=new Pe({}),{c(){e=D(),t=f("section"),s=f("div"),a=f("div"),l=f("h2"),g=L("Waiting List App"),U=D(),w=f("div"),re(h.$$.fragment),k=D(),_=f("div"),I=f("p"),C=L("Have have an account? "),E=f("a"),V=L("Sign in"),this.h()},l(c){he('[data-svelte="svelte-28ycbv"]',document.head).forEach(o),e=y(c),t=p(c,"SECTION",{class:!0});var T=m(t);s=p(T,"DIV",{class:!0});var P=m(s);a=p(P,"DIV",{class:!0});var S=m(a);l=p(S,"H2",{class:!0});var j=m(l);g=O(j,"Waiting List App"),j.forEach(o),U=y(S),w=p(S,"DIV",{class:!0});var H=m(w);oe(h.$$.fragment,H),H.forEach(o),S.forEach(o),k=y(P),_=p(P,"DIV",{class:!0});var q=m(_);I=p(q,"P",{class:!0});var B=m(I);C=O(B,"Have have an account? "),E=p(B,"A",{href:!0});var v=m(E);V=O(v,"Sign in"),v.forEach(o),B.forEach(o),q.forEach(o),P.forEach(o),T.forEach(o),this.h()},h(){document.title="Waiting List App - Sign up",u(l,"class","subtitle is-3 has-text-centered pb-4"),u(w,"class","content"),u(a,"class","box p-6"),u(E,"href","/auth/signin"),u(I,"class","has-text-centered"),u(_,"class","box"),u(s,"class","column is-two-fifths-desktop is-offset-4-desktop"),u(t,"class","columns mt-2")},m(c,F){W(c,e,F),W(c,t,F),n(t,s),n(s,a),n(a,l),n(l,g),n(a,U),n(a,w),ue(h,w,null),n(s,k),n(s,_),n(_,I),n(I,C),n(I,E),n(E,V),b=!0},p:_e,i(c){b||(ce(h.$$.fragment,c),b=!0)},o(c){fe(h.$$.fragment,c),b=!1},d(c){c&&o(e),c&&o(t),pe(h)}}}const Ce=async({fetch:r})=>{const e=await r("/api/admin.json");if(e.ok){const{isAdmin:t}=await e.json();if(!t)return{status:200}}return{status:302,redirect:"/auth/signin"}};class Fe extends le{constructor(e){super(),ie(this,e,null,Ie,ne,{})}}export{Fe as default,Ce as load};
