import{S as ee,i as ae,s as te,l as d,r as N,a as A,m as f,n as m,u as S,h as u,c as D,p as l,T as se,P as O,b as q,Q as o,U as P,V as re,E as Y,G as ne,M as le,I as oe,w as ie,x as ce,y as ue,J as de,K as fe,L as me,f as Z,t as x,B as _e}from"../../chunks/index-57f72b05.js";import{g as ve}from"../../chunks/navigation-88dbfef8.js";import{p as pe}from"../../chunks/stores-4b62de0a.js";import{s as he}from"../../chunks/auth-0705a79d.js";import"../../chunks/singletons-cdeec3fd.js";import"../../chunks/db-73fbacc6.js";import"../../chunks/preload-helper-4c397a37.js";import"../../chunks/internal-84789be8.js";function ge(t){return t instanceof Function}async function be({redirectTo:t="/",user:a,status:n=303},s){return a?ge(s)?s():{status:200}:{redirect:t,status:n}}function $e(t){let a,n,s,r,_,i,e,c,v,$,y,E,B,U,p,h,T,F,V,G,g,H,M,R;return{c(){a=d("nav"),n=d("div"),s=d("div"),r=d("a"),_=N("WLA"),i=A(),e=d("div"),c=d("div"),v=d("div"),$=d("button"),y=d("figure"),E=d("img"),U=A(),p=d("div"),h=d("a"),T=N("Update Password"),F=A(),V=d("hr"),G=A(),g=d("a"),H=N("Log Out"),this.h()},l(b){a=f(b,"NAV",{class:!0,"aria-label":!0});var w=m(a);n=f(w,"DIV",{class:!0});var k=m(n);s=f(k,"DIV",{class:!0});var W=m(s);r=f(W,"A",{class:!0,href:!0});var j=m(r);_=S(j,"WLA"),j.forEach(u),W.forEach(u),i=D(k),e=f(k,"DIV",{class:!0});var C=m(e);c=f(C,"DIV",{class:!0});var J=m(c);v=f(J,"DIV",{class:!0});var L=m(v);$=f(L,"BUTTON",{class:!0});var K=m($);y=f(K,"FIGURE",{class:!0});var Q=m(y);E=f(Q,"IMG",{class:!0,src:!0,alt:!0}),Q.forEach(u),K.forEach(u),U=D(L),p=f(L,"DIV",{class:!0});var I=m(p);h=f(I,"A",{href:!0,class:!0});var z=m(h);T=S(z,"Update Password"),z.forEach(u),F=D(I),V=f(I,"HR",{class:!0}),G=D(I),g=f(I,"A",{href:!0,class:!0});var X=m(g);H=S(X,"Log Out"),X.forEach(u),I.forEach(u),L.forEach(u),J.forEach(u),C.forEach(u),k.forEach(u),w.forEach(u),this.h()},h(){l(r,"class","navbar-item"),l(r,"href","/account"),l(s,"class","navbar-brand"),l(E,"class","is-rounded"),se(E.src,B="https://avatars.githubusercontent.com/u/54469796")||l(E,"src",B),l(E,"alt","Placeholder"),l(y,"class","image"),l($,"class","button is-medium is-ghost"),l(h,"href","/account/password-update"),l(h,"class","navbar-item"),O(h,"is-active",t[1].url.pathname=="/password-update"),l(V,"class","navbar-divider"),l(g,"href","/logout"),l(g,"class","navbar-item"),l(p,"class","navbar-dropdown"),l(v,"class","navbar-item has-dropdown"),O(v,"is-active",t[0]),l(c,"class","navbar-end"),l(e,"class","navbar-menu"),l(n,"class","container is-max-desktop"),l(a,"class","navbar svelte-9nhdoj"),l(a,"aria-label","main navigation")},m(b,w){q(b,a,w),o(a,n),o(n,s),o(s,r),o(r,_),o(n,i),o(n,e),o(e,c),o(c,v),o(v,$),o($,y),o(y,E),o(v,U),o(v,p),o(p,h),o(h,T),o(p,F),o(p,V),o(p,G),o(p,g),o(g,H),M||(R=[P($,"click",t[2]),P(g,"click",re(t[3])),P(p,"click",t[2]),P(v,"mouseleave",t[4])],M=!0)},p(b,[w]){w&2&&O(h,"is-active",b[1].url.pathname=="/password-update"),w&1&&O(v,"is-active",b[0])},i:Y,o:Y,d(b){b&&u(a),M=!1,ne(R)}}}function Ee(t,a,n){let s;le(t,pe,c=>n(1,s=c));let r=!1;const _=()=>n(0,r=!r);async function i(){await he(),ve("/auth")}return[r,s,_,i,()=>{n(0,r=!1)}]}class we extends ee{constructor(a){super(),ae(this,a,Ee,$e,te,{})}}function ye(t){let a,n,s,r;a=new we({});const _=t[1].default,i=oe(_,t,t[0],null);return{c(){ie(a.$$.fragment),n=A(),s=d("main"),i&&i.c(),this.h()},l(e){ce(a.$$.fragment,e),n=D(e),s=f(e,"MAIN",{class:!0});var c=m(s);i&&i.l(c),c.forEach(u),this.h()},h(){l(s,"class","container is-max-desktop svelte-1kra9kl")},m(e,c){ue(a,e,c),q(e,n,c),q(e,s,c),i&&i.m(s,null),r=!0},p(e,[c]){i&&i.p&&(!r||c&1)&&de(i,_,e,e[0],r?me(_,e[0],c,null):fe(e[0]),null)},i(e){r||(Z(a.$$.fragment,e),Z(i,e),r=!0)},o(e){x(a.$$.fragment,e),x(i,e),r=!1},d(e){_e(a,e),e&&u(n),e&&u(s),i&&i.d(e)}}}const Te=async({session:t})=>be({redirectTo:"/auth/signin",user:t.user},()=>{var a;return(a=t.user)!=null&&a.isAdmin?{status:307,redirect:"/manage"}:{}});function Ie(t,a,n){let{$$slots:s={},$$scope:r}=a;return t.$$set=_=>{"$$scope"in _&&n(0,r=_.$$scope)},[r,s]}class Fe extends ee{constructor(a){super(),ae(this,a,Ie,ye,te,{})}}export{Fe as default,Te as load};
